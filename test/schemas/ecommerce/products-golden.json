{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "E-Commerce Product Catalog",
  "type": "object",
  "properties": {
    "product_id": {
      "type": "string",
      "pattern": "^PRD-[A-Z0-9]{8}$",
      "description": "Unique product identifier"
    },
    "sku": {
      "type": "string",
      "pattern": "^[A-Z]{2}[0-9]{6}$",
      "description": "Stock keeping unit"
    },
    "name": {
      "type": "string",
      "minLength": 5,
      "maxLength": 100,
      "x-llm": true,
      "description": "llm: Generate a compelling product name based on category and brand"
    },
    "brand": {
      "type": "string",
      "enum": ["TechNova", "EcoLife", "SportMax", "HomeComfort", "StyleEdge", "BookWise", "GadgetPro"]
    },
    "category": {
      "type": "object",
      "properties": {
        "primary": {
          "type": "string",
          "enum": ["electronics", "clothing", "books", "home", "sports", "beauty", "automotive"]
        },
        "secondary": {
          "type": "string",
          "minLength": 3,
          "maxLength": 30
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 2,
            "maxLength": 20
          },
          "minItems": 1,
          "maxItems": 5
        }
      },
      "required": ["primary", "secondary"]
    },
    "description": {
      "type": "string",
      "minLength": 50,
      "maxLength": 500,
      "x-llm": true,
      "description": "llm: Generate detailed product description highlighting key features and benefits"
    },
    "pricing": {
      "type": "object",
      "properties": {
        "base_price": {
          "type": "number",
          "minimum": 0.99,
          "maximum": 9999.99
        },
        "sale_price": {
          "type": "number",
          "minimum": 0.99
        },
        "currency": {
          "type": "string",
          "enum": ["USD", "EUR", "GBP", "CAD"]
        },
        "discount_percentage": {
          "type": "number",
          "minimum": 0,
          "maximum": 75
        }
      },
      "required": ["base_price", "currency"]
    },
    "inventory": {
      "type": "object",
      "properties": {
        "stock_quantity": {
          "type": "integer",
          "minimum": 0,
          "maximum": 10000
        },
        "warehouse_location": {
          "type": "string",
          "pattern": "^[A-Z]{2}-[A-Z]{3}-[0-9]{3}$"
        },
        "reorder_level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100
        },
        "last_restocked": {
          "type": "string",
          "format": "date"
        }
      },
      "required": ["stock_quantity", "warehouse_location"]
    },
    "specifications": {
      "type": "object",
      "properties": {
        "dimensions": {
          "type": "object",
          "properties": {
            "length": {"type": "number", "minimum": 0.1},
            "width": {"type": "number", "minimum": 0.1},
            "height": {"type": "number", "minimum": 0.1},
            "unit": {"type": "string", "enum": ["cm", "in"]}
          }
        },
        "weight": {
          "type": "object",
          "properties": {
            "value": {"type": "number", "minimum": 0.01},
            "unit": {"type": "string", "enum": ["kg", "lb", "g", "oz"]}
          }
        },
        "color": {
          "type": "string",
          "enum": ["black", "white", "red", "blue", "green", "yellow", "purple", "orange", "gray", "brown"]
        },
        "material": {
          "type": "string",
          "minLength": 3,
          "maxLength": 50
        }
      }
    },
    "ratings": {
      "type": "object",
      "properties": {
        "average_rating": {
          "type": "number",
          "minimum": 1.0,
          "maximum": 5.0
        },
        "review_count": {
          "type": "integer",
          "minimum": 0,
          "maximum": 50000
        },
        "rating_distribution": {
          "type": "object",
          "properties": {
            "5_star": {"type": "integer", "minimum": 0},
            "4_star": {"type": "integer", "minimum": 0},
            "3_star": {"type": "integer", "minimum": 0},
            "2_star": {"type": "integer", "minimum": 0},
            "1_star": {"type": "integer", "minimum": 0}
          }
        }
      }
    },
    "availability": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": ["in_stock", "low_stock", "out_of_stock", "discontinued", "pre_order"]
        },
        "shipping": {
          "type": "object",
          "properties": {
            "free_shipping": {"type": "boolean"},
            "estimated_delivery_days": {"type": "integer", "minimum": 1, "maximum": 30},
            "shipping_weight": {"type": "number", "minimum": 0.01}
          }
        }
      },
      "required": ["status"]
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    }
  },
  "required": [
    "product_id", "sku", "name", "brand", "category", 
    "description", "pricing", "inventory", "availability"
  ],
  "x-cross-field-rules": [
    {
      "name": "sale_price_validation",
      "description": "Sale price must be less than base price",
      "fields": ["pricing.sale_price", "pricing.base_price"],
      "rule": "sale_price < base_price",
      "severity": "error"
    },
    {
      "name": "stock_availability_consistency",
      "description": "Availability status must match stock quantity",
      "fields": ["inventory.stock_quantity", "availability.status"],
      "rule": "stock_quantity == 0 implies status == 'out_of_stock'",
      "severity": "warning"
    },
    {
      "name": "rating_distribution_sum",
      "description": "Rating distribution should sum to review count",
      "fields": ["ratings.rating_distribution", "ratings.review_count"],
      "rule": "sum(rating_distribution) == review_count",
      "severity": "warning"
    }
  ]
}
